<html>
  <head>
    <script src="{{ url_for('static', filename='js/random.js')}}"></script>
    <script src="{{ url_for('static', filename='js/vue.js')}}"></script>
    <script src="{{ url_for('static', filename='js/es6-promise.js')}}"></script>
    <script src="{{ url_for('static', filename='js/jquery-2.2.4.min.js')}}"></script>
    <link href="{{ url_for('static', filename='css/style.css')}}" rel='stylesheet'>
  </head>
  <body>

    <div id="gameTemplate" class="hidden">
      <div class="calc-container">
        <img src="{{ url_for('static', filename='img/standard-board.png')}}" class="standard-board-img">
        <div
          class="territory"
          v-for="territory in territories"
          v-bind:key="territory.index" 
          v-bind:style="{top:territory.top, left:territory.left}"
          v-bind:class="[territory.color, {clickable: territoryClickable(territory), hidden: territoryHidden(territory)}]"
          v-on:click="clickTerritory(territory);"
          >
            [[territoryText(territory)]]
        </div>

                <!-- INSTRUCTIONS ----------------------------------------------------->      
        <div class="player-instructions">
          <table>
            <tr v-for="player in players">
              <td>
                <span class="arrow" v-bind:class="[{hidden: !player.active}]">â¬¤</span>
              </td>
              <td nowrap class="player-marker" v-bind:class="[player.color]">
                &nbsp;&nbsp;&nbsp;&nbsp;[[ playerNameText(player) ]]&nbsp;&nbsp;&nbsp;&nbsp;
              </td>
              <td class="instruction">
                [[ player.instruction ]]
              </td>
              <td valign="bottom">
                <div v-if="player.index === players.length - 1" class="help-link"><a target="_blank" href="dice.html">Help</a></div>          
              </td>
            </tr>
          </table>
        </div>

        <div class="undo-buttons">
          <button :disabled="!undoAvailable" v-on:click="clickUndo">Undo</button>
          <button :disabled="!redoAvailable" v-on:click="clickRedo">Redo</button>
        </div>

      </div>
    </div>

    <div id="calc-main" style="float:left;">
    </div>

    <div id="calc1" style="float:left;">
    </div>

    <div id="calc2" style="float:left;">
    </div>

  </body>
  <script src="{{ url_for('static', filename='js/territories.js')}}"></script>
  <script src="{{ url_for('static', filename='js/calc.js')}}"></script>
  <script type="text/javascript">
    var GAME_CONFIG = {{ gameConfig|tojson }};
    var REMOTE_SERVER;
    var LOCAL_SERVER;
    var GAME;
    var CALC1;
    var CALC2;
    if (GAME_CONFIG.init === "hotseat") {
      GAME = new CalcGame("#gameTemplate", "#calc-main", null, $.extend({}, GAME_CONFIG, DEFAULT_CONFIG));
    } else if (GAME_CONFIG.init === "two-boards") {
      LOCAL_SERVER = new LocalCalcServer();
      var GAME_CONFIG_2 = $.extend({}, GAME_CONFIG, DEFAULT_CONFIG);
      GAME_CONFIG_2.username = "Player 2";
      GAME_CONFIG_2.isHost = false;
      CALC1 = new CalcGame("#gameTemplate", "#calc1", LOCAL_SERVER, $.extend({}, GAME_CONFIG, DEFAULT_CONFIG));
      CALC2 = new CalcGame("#gameTemplate", "#calc2", LOCAL_SERVER, GAME_CONFIG_2);

    } else {
      REMOTE_SERVER = new RemoteCalcServer(GAME_CONFIG);
      GAME = new CalcGame("#gameTemplate", "#calc-main", REMOTE_SERVER, $.extend({}, GAME_CONFIG, DEFAULT_CONFIG));
  }
  </script>
</html>
